# Source Tree Analysis

**Analysis Date:** 2026-02-20
**Scan Level:** Deep

## Directory Structure

```
obsidian-infrastructure/
├── current_infrastructure/        # Core Infrastructure Module
│   ├── scripts/                   # Executable Scripts
│   │   ├── tmpl.sh                # Template Engine (Core)
│   │   ├── tmpl_ux.sh             # User Experience Wrapper
│   │   └── task.sh                # Task Creation Wrapper
│   ├── script_templates/          # Markdown Templates
│   │   ├── ST-default.md          # Default Template
│   │   └── ST-task.md             # Task Template
│   ├── staging-workflow.md          # Configuration (JSON Workflow Rules)
│   └── tests/                     # (Empty/Placeholder for future tests?)
├── tests/                         # Integration Tests (Root Level)
│   ├── mock_bin/                  # Mock Binaries for Testing
│   ├── test-1.1-infrastructure.sh # Infrastructure Test Suite
│   ├── test-1.3-parsing-logic.sh  # Parsing Logic Tests
│   ├── test-1.3-parsing.sh        # Parsing Tests
│   ├── test-1.4-validation.sh     # Validation Tests
│   └── test-1.5-operations.sh     # Operations Tests
├── scripts/                       # (Root Level Scripts - likely duplicates or alternative entry points?)
│   ├── generate_test_data.sh      # Test Data Generator
│   └── stage.sh                   # Staging Script
└── docs/                          # Documentation Output (Generated by BMad)
```

## Key Components

### Core Scripts (`current_infrastructure/scripts/`)
- **`tmpl.sh`**: The engine that performs variable substitution in markdown templates.
- **`tmpl_ux.sh`**: The main entry point for users/shortcuts, handling arguments and setup.
- **`task.sh`**: A specific command to create tasks using `ST-task.md`.

### Configuration
- **`staging-workflow.md`**: Defines where files should be placed based on their type (e.g., `media/anime` -> `Media/Anime`).

### Testing
- **`tests/`**: Contains a suite of shell scripts aimed at validating different aspects of the infrastructure (parsing, validation, operations).
